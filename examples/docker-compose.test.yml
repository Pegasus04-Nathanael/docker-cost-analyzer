# examples/docker-compose.test.yml
version: '3.8'

services:
  # Over-provisioned container
  waste-cpu:
    image: nginx:alpine
    deploy:
      resources:
        limits:
          cpus: '4.0'
          memory: 4096M
        reservations:
          cpus: '2.0'
          memory: 2048M
  
  # Insecure container
  insecure:
    image: nginx:alpine
    user: root
    ports:
      - "0.0.0.0:8080:80"
    cap_add:
      - ALL
  
  # Bloated image
  bloated:
    build:
      context: .
      dockerfile: Dockerfile.bloated
    # Will be large image with unnecessary layers
  
  # Well-optimized baseline
  optimized:
    image: nginx:alpine
    user: "101:101"
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M